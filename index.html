<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CareerCraft ‚Äì Dashboard</title>

    <style>
        /* SAME THEME SYSTEM FROM THE DEMO */
        :root{
            --bg1:#0a0f24;
            --bg2:#0e1b3f;
            --bg3:#0b2b6b;
            --accent:#2d6cdf;
            --text:#ffffff;
            --muted:#d1dcff;
            --card:rgba(255,255,255,0.06);
        }
        [data-theme="light"]{
            --bg1:#f0f3ff;
            --bg2:#e6ecff;
            --bg3:#dce6ff;
            --accent:#1b4eb3;
            --text:#0d152f;
            --muted:#333a55;
            --card:rgba(0,0,0,0.06);
        }

        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, var(--bg1), var(--bg2), var(--bg3));
            color: var(--text);
            height: 100vh;
            overflow-x: hidden;
            display:flex;
        }

        /* Layout now responsive */
        .layout {
            display: grid;
            grid-template-columns: 240px 1fr 320px;
            width:100%;
            gap:20px;
            padding:20px;
        }

        @media(max-width:1100px){
            .layout { grid-template-columns: 220px 1fr; }
            .signup { display:none; }
        }
        @media(max-width:768px){
            .layout { grid-template-columns: 1fr; padding:10px; }
            .signup{ display:none; }
            .sidebar { 
                position:fixed;
                top:0; left:-260px;
                width:240px;
                height:100%;
                transition:.3s ease;
                z-index:50;
            }
            .sidebar.open { left:0; }
        }

        /* Hamburger */
        .ham-btn{
            display:none;
            position:fixed;
            top:15px; left:15px;
            z-index:60;
            background:rgba(255,255,255,0.2);
            padding:10px 14px;
            border-radius:6px;
            cursor:pointer;
            backdrop-filter:blur(5px);
        }
        @media(max-width:768px){
            .ham-btn{ display:block; }
        }

        /* Sidebar */
        .sidebar {
            background: rgba(0,0,0,0.4);
            padding: 20px;
            border-radius: 12px;
            backdrop-filter: blur(6px);
        }
        .sidebar .logo {
            text-align: center;
            margin-bottom: 20px;
            color: var(--accent);
        }
        .menu li {
            list-style: none;
            padding: 10px 0;
            cursor: pointer;
            color: var(--muted);
        }
        .menu li:hover {
            color: var(--text);
        }

        /* Main Dashboard */
        .main {
            padding: 40px;
            background: rgba(255,255,255,0.03);
            border-radius:16px;
            backdrop-filter:blur(8px);
        }
        .profile-cards {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        .p-card {
            background: var(--card);
            padding: 20px;
            border-radius: 10px;
            width: 250px;
            backdrop-filter: blur(8px);
            box-shadow:0 4px 10px rgba(0,0,0,0.3);
            transition:.3s;
        }
        .p-card:hover{
            transform: translateY(-6px);
        }

        /* Signup Section */
        .signup {
            background: var(--card);
            padding: 30px;
            border-radius:12px;
            backdrop-filter:blur(8px);
        }
        .signup input {
            padding: 10px;
            border:none;
            border-radius:6px;
            width:100%;
            margin-bottom:12px;
        }

        .cta-btn {
            margin-top: 10px;
            padding: 12px;
            background: var(--accent);
            border:none;
            border-radius:5px;
            color:white;
            cursor:pointer;
            transition:.2s;
        }
        .cta-btn:hover {
            transform: scale(1.05);
        }

        /* Career Role Cards */
        .roles {
            display:grid;
            gap:16px;
            margin-top:25px;
        }
        .role-card{
            background: var(--card);
            padding:16px;
            border-radius:10px;
            cursor:pointer;
        }
        .role-desc{
            display:none;
            margin-top:8px;
            color:var(--muted);
        }
        .role-card.open .role-desc{
            display:block;
        }

        /* Progress bar */
        .progress {
            height: 10px;
            width: 100%;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            overflow:hidden;
            margin-top:8px;
        }
        .progress i {
            display:block;
            height:100%;
            width: 0%;
            background: linear-gradient(90deg,#79a7ff,#2d6cdf);
            transition:.3s;
        }

        /* Toast */
        .toast{
            position:fixed;
            left:50%; bottom:20px;
            transform:translateX(-50%);
            background:rgba(0,0,0,0.55);
            padding:10px 16px;
            border-radius:10px;
            display:none;
            color:white;
        }
    </style>
</head>

<body>

    <!-- Hamburger for mobile -->
    <div class="ham-btn" id="hamBtn">‚ò∞</div>

    <div class="layout">

        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <h2 class="logo">CareerCraft</h2>
            <ul class="menu">
                <li>üè† Home</li>
                <li>üìÑ Dashboard</li>
                <li>üßë‚Äçüéì Career Roles</li>
                <li>üìà Paths</li>
                <li>‚öôÔ∏è Settings</li>
                <li><button id="themeToggle" class="cta-btn" style="padding:6px 10px;font-size:13px;">Toggle Theme</button></li>
            </ul>
        </aside>

        <!-- Main Content -->
        <main class="main">

            <section class="profile">
                <h1 id="usernameTitle">Welcome, Guest</h1>
                <p>Your personalized career dashboard.</p>

                <!-- Dashboard Cards -->
                <div class="profile-cards">
                    <div class="p-card">
                        <h3>Your Role Match</h3>
                        <p id="roleMatch">‚Äî</p>
                    </div>

                    <div class="p-card">
                        <h3>Next Skill to Learn</h3>
                        <p id="nextSkill">‚Äî</p>
                    </div>

                    <div class="p-card">
                        <h3>Progress</h3>
                        <p id="levelText">Level 1</p>

                        <div class="progress">
                            <i id="progressBar"></i>
                        </div>

                        <button class="cta-btn" id="incProgress">Increase</button>
                        <button class="cta-btn" style="background:red;margin-top:8px;" id="resetProgress">Reset</button>
                    </div>
                </div>
            </section>

            <!-- Career Roles -->
            <h2 style="margin-top:40px;">Career Roles</h2>
            <div class="roles" id="rolesList"></div>

        </main>

        <!-- Signup / Login -->
        <section class="signup">
            <h2 id="authTitle">Create Account</h2>

            <!-- Signup -->
            <div id="signupBox">
                <input type="text" id="suName" placeholder="Name">
                <input type="email" id="suEmail" placeholder="Email">
                <input type="password" id="suPass" placeholder="Password">
                <button class="cta-btn" id="signupBtn">Sign Up</button>
                <p>Already have an account? <span id="showLogin" style="cursor:pointer;text-decoration:underline;">Login</span></p>
            </div>

            <!-- Login -->
            <div id="loginBox" style="display:none;">
                <input type="email" id="liEmail" placeholder="Email">
                <input type="password" id="liPass" placeholder="Password">
                <button class="cta-btn" id="loginBtn">Login</button>
                <p>New user? <span id="showSignup" style="cursor:pointer;text-decoration:underline;">Sign Up</span></p>
            </div>

            <h4 style="margin-top:20px;">Saved Roles</h4>
            <div id="savedRoles" style="color:var(--muted);font-size:14px;">No saved roles yet.</div>
        </section>

    </div>

    <!-- Toast Message -->
    <div class="toast" id="toast">Message</div>

    <script>
        /* ========================
           Theme Switch
        ======================== */
        function applyTheme(t){
            if(t==="light") document.documentElement.setAttribute("data-theme","light");
            else document.documentElement.removeAttribute("data-theme");
            localStorage.setItem("theme",t);
        }
        applyTheme(localStorage.getItem("theme") || "dark");

        document.getElementById("themeToggle").onclick = () => {
            let t = document.documentElement.getAttribute("data-theme")==="light"?"dark":"light";
            applyTheme(t);
        };

        /* Mobile Sidebar */
        const hamBtn = document.getElementById("hamBtn");
        const sidebar = document.getElementById("sidebar");
        hamBtn.onclick = () => sidebar.classList.add("open");
        document.onclick = (e)=>{
            if(!sidebar.contains(e.target) && !hamBtn.contains(e.target)){
                sidebar.classList.remove("open");
            }
        };

        /* Toast */
        function toast(msg){
            let t = document.getElementById("toast");
            t.innerText = msg;
            t.style.display="block";
            setTimeout(()=>t.style.display="none",2000);
        }

        /* ========================
           LocalStorage Auth
        ======================== */
        function readUsers(){
            return JSON.parse(localStorage.getItem("users") || "{}");
        }
        function writeUsers(a){
            localStorage.setItem("users", JSON.stringify(a));
        }
        function setLogged(email){
            if(email) localStorage.setItem("logged",email);
            else localStorage.removeItem("logged");
        }

        /* ========================
           Signup & Login
        ======================== */
        const signupBox=document.getElementById("signupBox");
        const loginBox=document.getElementById("loginBox");
        const authTitle=document.getElementById("authTitle");

        document.getElementById("showLogin").onclick = ()=>{
            signupBox.style.display="none";
            loginBox.style.display="block";
            authTitle.innerText="Login";
        };
        document.getElementById("showSignup").onclick = ()=>{
            loginBox.style.display="none";
            signupBox.style.display="block";
            authTitle.innerText="Create Account";
        };

        document.getElementById("signupBtn").onclick = ()=>{
            let name=suName.value.trim();
            let email=suEmail.value.trim().toLowerCase();
            let pass=suPass.value;

            if(!name||!email||!pass) return toast("Fill all fields");
            if(pass.length<6) return toast("Password too short");

            let users=readUsers();
            if(users[email]) return toast("User exists");

            users[email]={name,pass,progress:20,savedRoles:[]};
            writeUsers(users);
            setLogged(email);
            updateUI();
            toast("Account created");
        };

        document.getElementById("loginBtn").onclick = ()=>{
            let email=liEmail.value.trim().toLowerCase();
            let pass=liPass.value;
            let users=readUsers();

            if(!users[email]) return toast("No such user");
            if(users[email].pass!==pass) return toast("Wrong password");

            setLogged(email);
            updateUI();
            toast("Logged in");
        };

        /* ========================
           Dashboard
        ======================== */
        function updateUI(){
            let logged=localStorage.getItem("logged");
            let users=readUsers();
            let u=users[logged];

            if(!u){
                document.getElementById("usernameTitle").innerText="Welcome, Guest";
                return;
            }

            document.getElementById("usernameTitle").innerText="Welcome, "+u.name;

            progressBar.style.width=u.progress+"%";
            levelText.innerText="Level "+Math.max(1,Math.round(u.progress/25));

            if(u.savedRoles[0]){
                let role = demoRoles.find(r=>r.id===u.savedRoles[0]) || demoRoles[0];
                roleMatch.innerText = role.title+" ‚Äì "+role.match+"%";
                nextSkill.innerText=role.skill;
            } else {
                roleMatch.innerText="‚Äî";
                nextSkill.innerText="‚Äî";
            }

            renderSavedRoles(u.savedRoles);
        }

        /* ========================
           Progress Buttons
        ======================== */
        incProgress.onclick = ()=>{
            let logged=localStorage.getItem("logged");
            if(!logged) return toast("Login first");

            let users=readUsers();
            let u=users[logged];
            u.progress=Math.min(100,u.progress+10);
            writeUsers(users);
            updateUI();
        };

        resetProgress.onclick = ()=>{
            let logged=localStorage.getItem("logged");
            if(!logged) return toast("Login first");

            let users=readUsers();
            users[logged].progress=0;
            writeUsers(users);
            updateUI();
        };

        /* ========================
           Roles
        ======================== */
        const demoRoles = [
            {id:"r1",title:"Software Developer",match:87,skill:"DSA",desc:"Create scalable apps."},
            {id:"r2",title:"Data Scientist",match:74,skill:"Statistics",desc:"Analyze and model data."},
            {id:"r3",title:"ML Engineer",match:65,skill:"MLOps",desc:"Deploy ML models."},
        ];

        function renderRoles(){
            rolesList.innerHTML="";
            demoRoles.forEach(r=>{
                let div=document.createElement("div");
                div.className="role-card";
                div.dataset.id=r.id;
                div.innerHTML=`
                    <strong>${r.title}</strong> ‚Äì ${r.match}%
                    <button class="cta-btn" style="float:right;padding:6px 10px;" onclick="saveRole('${r.id}')">Save</button>
                    <div class="role-desc">${r.desc}</div>
                `;
                div.onclick=()=>div.classList.toggle("open");
                rolesList.appendChild(div);
            });
        }
        renderRoles();

        function saveRole(id){
            let logged=localStorage.getItem("logged");
            if(!logged) return toast("Login first");

            let users=readUsers();
            let u=users[logged];
            if(!u.savedRoles.includes(id)) u.savedRoles.unshift(id);
            writeUsers(users);
            toast("Saved");
            updateUI();
        }

        function renderSavedRoles(list){
            let box=document.getElementById("savedRoles");
            if(list.length===0) return box.innerHTML="No saved roles yet.";
            box.innerHTML=list.map(id=>{
                let r=demoRoles.find(x=>x.id===id);
                return `<div style="background:rgba(255,255,255,0.1);margin:6px 0;padding:6px;border-radius:6px;">${r.title}</div>`;
            }).join("");
        }

        updateUI();
    </script>
</body>
</html>

